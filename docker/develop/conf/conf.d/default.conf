server {
        listen 80 default_server;
        listen [::]:80 default_server;

        root /var/www;

        # Add index.php to the list if you are using PHP
        index index.html index.htm index.nginx-debian.html;

        server_name _;

        # 静态资源处理 - 关键修复：不要 fallback 到 index.html
         location ~ ^/.*/static/(.*)$ {
            alias /var/www/static/$1;
            expires 1y;
            add_header Cache-Control "public, immutable";
        }

         # 处理根目录的 static 资源
        location /static/ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
        # 处理其他静态文件（favicon 等）
        location ~ ^/.*/([^/]+\.(ico|svg|png|jpg|jpeg|gif|webmanifest))$ {
            try_files /$1 =404;
        }

        # SPA 路由处理 - 只对非静态资源 fallback 到 index.html
        location / {
            try_files $uri $uri/ /index.html;
        }

}
